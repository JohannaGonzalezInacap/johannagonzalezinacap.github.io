<!DOCTYPE html>
<html lang="es">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <meta name="theme-color" content="#4caf50">
    <link rel="manifest" href="manifest.json">
  <title>Recordatorio de Medicamentos</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://www.gstatic.com/firebasejs/11.0.2/firebase-app-compat.js" defer></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.2/firebase-messaging-compat.js" defer></script>
  <script src="config.js" defer></script>
  <script type="module" src="app.js"></script>
</head>
<body>

  <h1>ğŸ’Š Mis Medicamentos</h1>

  <div id="alerta" class="alert-box" aria-live="polite"></div>

  <section class="settings">
    <h2>âš™ï¸ Alertas</h2>
    <div class="notif-row">
      <button type="button" id="notifBtn" class="primary-btn">Activar notificaciones</button>
      <span id="notifStatus" aria-live="polite"></span>
    </div>
    <div class="push-row">
      <div class="push-actions">
        <button type="button" id="pushBtn" class="primary-btn">Activar recordatorios push</button>
        <span id="pushStatus" aria-live="polite"></span>
      </div>
    </div>
  </section>

  <section class="settings wa-box">
    <h2>ğŸ“² WhatsApp de alertas</h2>
    <p class="help-text">
      Ingresa los nÃºmeros donde llegarÃ¡ la alerta de umbral (stock mÃ­nimo). Al dispararse, se abrirÃ¡ WhatsApp con un mensaje prellenado listo para enviar a cada nÃºmero guardado.
      Ejemplo de formato: 912345678 (Chile) / 4141234567 (Venezuela) / 7731234567 (EEUU).
    </p>
    <div class="phone-row">
      <label class="country-picker">
        CÃ³digo de paÃ­s:
        <select id="waCountry">
          <option value="56">ğŸ‡¨ğŸ‡± +56 Chile</option>
          <option value="58">ğŸ‡»ğŸ‡ª +58 Venezuela</option>
          <option value="1">ğŸ‡ºğŸ‡¸ +1 Estados Unidos</option>
          <option value="34">ğŸ‡ªğŸ‡¸ +34 EspaÃ±a</option>
          <option value="52">ğŸ‡²ğŸ‡½ +52 MÃ©xico</option>
          <option value="57">ğŸ‡¨ğŸ‡´ +57 Colombia</option>
          <option value="51">ğŸ‡µğŸ‡ª +51 PerÃº</option>
          <option value="">ğŸŒ Otro</option>
        </select>
      </label>
      <label class="phone-input">
        NÃºmero (solo dÃ­gitos):
        <input type="text" id="waNumber" inputmode="tel" pattern="[0-9]+" placeholder="Ej: 912345678 (CL) / 4141234567 (VE) / 7731234567 (US)">
      </label>
    </div>
    <div class="wa-actions">
      <button type="button" id="waAddBtn" class="primary-btn">Agregar nÃºmero</button>
    </div>
    <ul id="waList" class="phone-list" aria-live="polite"></ul>
    <label class="inline">
      <input type="checkbox" id="waAuto"> Enviar alerta de umbral a WhatsApp automÃ¡ticamente
    </label>
    <small>Se abrirÃ¡ WhatsApp Web/mÃ³vil con el mensaje prellenado para solo presionar enviar.</small>
  </section>

  <form id="medForm">
    <input type="text" id="nombre" placeholder="Nombre del medicamento" required>
    <input type="number" id="stock" placeholder="Stock inicial" required>
    <input type="number" id="dosis" placeholder="Dosis diaria" required>
    <button type="submit">Agregar</button>
  </form>

  <ul id="listaMedicamentos"></ul>

  <h2>ğŸ“… Calendario de consumo</h2>
  <label>
  Ver calendario de:
  <select id="filtroMedicamento"></select>
    </label>

<div id="calendario"></div>

  <h2>ğŸ—‚ï¸ Historial</h2>
  <div class="historial-filtros">
    <label>Medicamento:
      <select id="filtroHistMed"></select>
    </label>
    <label>Mes:
      <input type="month" id="filtroHistMes">
    </label>
  </div>
  <div id="historialLista"></div>

  <footer style="margin-top:20px; font-size:0.9rem;">
    <a href="privacy-policy.md" target="_blank">PolÃ­tica de Privacidad / Privacy Policy</a>
  </footer>
 
</body>
</html>
